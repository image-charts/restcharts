# [RESTCharts](https://www.restcharts.com)

Generate PNG images of charts easily through a simple REST-like API.

Charts generated by [Highcharts](https://www.highcharts.com/)

![Red Area Chart](https://api.restcharts.com/chart/area?data=1,2,6,4,10,7,4,5,2,9,8&color=f00&height=150&width=200)

Example: [https://api.restcharts.com/chart/area?data=1,2,6,4,10,7,4,5,2,9,8&color=f00](https://api.restcharts.com/chart/area?data=1,2,6,4,10,7,4,5,2,9,8&color=f00)

## API

```sh
$ curl -X GET https://api.restcharts.com/chart/:type[?parameter1=val1&parameter2=val2]
```

or

```sh
$ curl -X POST https://api.restcharts.com/chart/:type -d '{"parameter1": "val1", "parameter2": "val2", ...}'
```

## Parameters

### Simple Params

#### URL parameters

- `type`: The type of the chart you want to generate. See all types [here](https://www.highcharts.com/docs/chart-and-series-types/chart-types).

#### Body/query string parameters

- `data`: Comma-delimited list of your data that needs to be charted.
This is a *required* parameter if the `raw` config option (see [Advanced](#advanced-params) below)
is not provided or it is but a `series` array within the raw config is not provided.
- `color`: The color of the line/bar/column/etc. of the chart.
- `bg`: The background color of the area surrounding the chart (default: transparent, i.e. `rgba(0, 0, 0, 0)`)
- `height`: The height of the generated chart.
- `width`: The width of the generated chart.
- `opacity`: If an area chart (or variation), will be the opacity of the area.
- `linewidth`: If a line or spline chart, the line width of the lines.

### Advanced Params

If you want to generate a chart using [any Highcharts options](https://api.highcharts.com/highcharts/)
(the relevant options are the ones in the `Highcharts.chart()` method),
you can provide a raw config object with any available options you'd like
to provide for the chart type desired. Any configuration you have in the raw
parameter will override the default options. Examples can be seen [here](https://www.restcharts.com/#Advanced%20Configuration).

- `raw`: The JSON serialized config object. If the `data` parameter is not
provided, a `series` array of data needs to be included here.

### Default Configuration

The default Highcharts configuration object that is used if only simple parameters
above are provided is as follows. We perform a deep [`Object.assign()`](https://github.com/saikojosh/Object-Assign-Deep)
with this object as the target and the `raw` object overwriting anything in
this object if it's provided in a request:

```js
{
  chart: {
    type: `type`,
    backgroundColor: `bg`,
    margin: [ 0, 0, 0, 0 ],
    height: `height`,
    width: `width`
  },
  plotOptions: {
    area: {
      fillOpacity: `opacity`
    }
  },
  credits: {
    enabled: false
  },
  xAxis: {
    visible: false
  },
  yAxis: {
    visible: false
  },
  legend: {
    enabled: false
  },
  exporting: {
    enabled: false
  },
  title: {
    text: '',
  },
  series: [{
    lineWidth: `linewidth`,
    color: `color`,
    data: `data`.map(d => ({ y: parseVal(d, 'integer'), marker: { enabled: false }}))
  }]
}
```

## Development

### Environment Variables

The following environment variables is required for the app to be deployed and
Highcharts installed correctly without problems. Please make sure you
have a Highcharts license per their licensing requirements :)

1. ACCEPT_HIGHCHARTS_LICENSE=YES

### Build

```sh
$ # To build the distribution files for the server
$ gulp build
$ # To run the dev server via nodemon
$ npm run dev
$ # To run tests
$ npm test
```
